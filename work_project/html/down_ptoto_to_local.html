<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <button id="id1">下载</button>
  <script>
    let id1 = document.getElementById('id1');
    id1.addEventListener('click', downloadIamge);
    function downloadIamge() {  //下载图片地址和图片名
      console.log('走到方法中');
      const image = new Image();
      // 解决跨域 Canvas 污染问题
      // image.setAttribute("crossOrigin", "anonymous");
      image.onload = function () {
        // let canvas = document.createElement("canvas");
        // canvas.width = image.width;
        // canvas.height = image.height;
        // const context = canvas.getContext("2d");
        // context.drawImage(image, 0, 0, image.width, image.height);
        // const url = canvas.toDataURL("image/png"); //得到图片的base64编码数据
        const a = document.createElement("a"); // 生成一个a元素
        const event = new MouseEvent("click"); // 创建一个单击事件
        a.download = "个人的图片"; // 设置图片名称
        a.href = '../src/img.jpg'; // 将生成的URL设置为a.href属性
        a.dispatchEvent(event); // 触发a的单击事件
      };
      image.src = '../src/img.jpg';
    }
  </script>
</body>
</html>